name: Deploy site to GitHub Pages
on:
  push:	
    branches:	
      - main

jobs:
  deploy:
    name: Deploy to GitHub Pages
    runs-on: ubuntu-latest    
    steps:
    
    - run: echo "🎉 The job was automatically triggered by a ${{ github.event_name }} event."
    - run: echo "The name of github.repository is ${{ github.server_url }}/${{ github.repository }}."
    
    - name: Check out repository code
      uses: actions/checkout@master

    # - name: Move files into ./pages and check file
    #   run: mkdir /tmp/pages && cp --recursive ./src/static/* /tmp/pages && mv /tmp/pages ./pages

    - name: List files in the repository
      run: tree ./src/static

    - name: Deploy 🚀
      uses: JamesIves/github-pages-deploy-action@4.1.7
      with:
        token: ${{ secrets.GHPAGES_TOKEN }}
        branch: gh-pages # The branch the action should deploy to.
        folder: ./src/static # The folder the action should deploy.

    - run: echo "🍏 This job's status is ${{ job.status }}."
