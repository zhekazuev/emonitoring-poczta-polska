name: Deploy site to GitHub Pages
on:
  push:	
    branches:	
      - main

jobs:
  deploy:
    name: Deploy to GitHub Pages
    runs-on: ubuntu-latest    
    steps:

    # Any prerequisite steps
    - uses: actions/checkout@master

    - name: Copy content to subdirectory
      run: mkdir /tmp/pages && cp --recursive ./src/static/* /tmp/pages && mv /tmp/pages ./pages && ls -l ./pages

    # Deploy to local repo
    - name: Deploy
      uses: s0/git-publish-subdir-action@develop
      env:
        #REPO: git@github.com:zhekazuev/emonitoring-poczta-polska.git
        REPO: self
        BRANCH: gh-pages
        FOLDER: src
        GITHUB_TOKEN: ${{ secrets.GHPAGES_TOKEN }}
        #SSH_PRIVATE_KEY: ${{ secrets.DEPLOY_PRIVATE_KEY }}
